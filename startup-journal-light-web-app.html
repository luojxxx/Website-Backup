<div class="main-content" data-collection-id="58e8649b3e00be49e5631637" data-content-field="main-content" data-edit-main-image="" id="content">
<div class="sqs-layout sqs-grid-12 columns-12" data-type="page" data-updated-on="1707461813653" id="page-58e8649b3e00be49e5631637"><div class="row sqs-row"><div class="col sqs-col-12 span-12"><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-6e073af597d43ce03536"><div class="sqs-block-content">
<div class="sqs-html-content">
<h1 style="white-space:pre-wrap;">Startup: Journal Light Web App</h1>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_42_1494625512386_3813"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:826px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:72.88135528564453%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png" data-image-dimensions="826x602" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png" data-stretch="false" decoding="async" elementtiming="system-image-block" height="602" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494653162571-X5XYXUQYJS4VCHD05HSZ/landing_background_source.png?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="826"/>
</div>
</div>
<figcaption class="image-caption-wrapper">
<div class="image-caption"><p class="" style="white-space:pre-wrap;"><a href="https://nostalgic-kalam-65a30e.netlify.app/"><strong>Link to Web App</strong></a></p></div>
</figcaption>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_42_1494625512386_4092"><div class="sqs-block-content">
<div class="sqs-html-content">
<h2 style="white-space:pre-wrap;">The Motivation</h2><p class="" style="white-space:pre-wrap;">I just remembered a moment in my life, I was visiting Santa Cruz with my friends, standing in the tide, letting the the sand run between my toes, and staring out into the ocean.</p><p class="" style="white-space:pre-wrap;">And because the tide was rapidly coming in and I still wasn’t moving, my friends started shouting from a distance “Are you okay?!”</p><p class="" style="white-space:pre-wrap;">But really I was just throughly enjoying the sand running between my toes, and also curious how deeply I'll sink into the sand, since the tide washed a little out from underneath me each time.</p><p class="" style="white-space:pre-wrap;">It was a great moment in my life, and I tell myself, I’ll never forget that moment. But will I?</p><p class="" style="white-space:pre-wrap;">I started to think about what makes us who we are, it’s not just where we’re going, it’s also very much where we’ve been. After looking through my old photos, which goes back over 10 years, and thinking back to Everything that’s happened. My life felt more like an epic like the Odyssey rather than a short story. And what I realized is that it’s just because of what you can remember at any given moment. We constantly forget the details and moments that define our story.</p><p class="" style="white-space:pre-wrap;">And I wished I captured more of the details. There’s huge gaps in between the photos and even those only capture a part of the story, but I still remember a fair amount around each one. So I wanted to start keeping a journal, but I struggled. I’m really busy and don’t have time to journal regularly. I needed a journal that made it easy to catch up on journaling, but also let me record these random flashbacks that I'll never remember again, and just be able to record past entries more easily.</p><p class="" style="white-space:pre-wrap;">It is really tedious to have to create the entry, check the date of an entry by referencing another event, and then change the date. All I want to do is just add an entry next to this one! And that’s when I figured it out, there might something I can build, not just for me but for everyone.</p><p class="" style="white-space:pre-wrap;">Plus I needed a full stack portfolio piece. And that’s how Journal Light started!</p><h2 style="white-space:pre-wrap;">Technical - sorting on partial information</h2><p class="" style="white-space:pre-wrap;">Probably the first and foremost issue was finding a way to have this fuzzy representation of the time of an entry while still being able to sort it based on the information available.</p><p class="" style="white-space:pre-wrap;">Basically what I ended up going with was an array specifying the [year, month, day, hour, minute, second] along with the precision of the entry which could be none, year, month, day, hour, minute, or second.</p><p class="" style="white-space:pre-wrap;">Now this is where I needed something special, I needed a custom sorting algorithm. For example, if I was <strong>ordering by most recent</strong>, this is what I would expect as an output given the input:</p><pre><code>### Input ###
2015
2016 Mar
2016
2016 Jan
### Output ###
2016 Mar
2016
2016 Jan
2015

### Input ###
2016 Mar
2016 
2016 Jan
2016 Dec
### Output ###
2016 Dec
2016 Mar
2016 
2016 Jan
</code></pre><p class="" style="white-space:pre-wrap;">So I ended up creating this divide and conquer style recursive sort algorithm.</p><p class="" style="white-space:pre-wrap;">Essentially what it did was:</p><ol data-rte-list="default"><li><p class="" style="white-space:pre-wrap;">Select the entries by precision starting with the lowest</p></li><li><p class="" style="white-space:pre-wrap;">Sort that layer based on that layers information</p></li><li><p class="" style="white-space:pre-wrap;">Remove that layer's entries from the list while recording it's index position, and appending it into another list</p></li><li><p class="" style="white-space:pre-wrap;">Select the entries with the next higher level of precision and repeat</p></li></ol><p class="" style="white-space:pre-wrap;">Once the recursion had bottomed out it would reconstruct the sorted list by:</p><ol data-rte-list="default"><li><p class="" style="white-space:pre-wrap;">Select the entries by precision starting with the highest</p></li><li><p class="" style="white-space:pre-wrap;">Insert sorted entries back into list based on index position</p></li><li><p class="" style="white-space:pre-wrap;">Select the entries with the next lower level of precision and repeat</p></li></ol><p class="" style="white-space:pre-wrap;">There is still a quirk to this algorithm. For instance, the current implementation will do this:</p><pre><code>### Input ###
2016 Mar
2016 (a journal entry between January and March)
2016 Jan
2016 Dec
### Output ###
2016 Dec
2016 (a journal entry between March and December?)
2016 Mar
2016 Jan
</code></pre><p class="" style="white-space:pre-wrap;">Even though we probably would've expected it to be more so along the lines of this:</p><pre><code>### Output ###
2016 Dec
2016 Mar
2016 (a journal entry between January and March)
2016 Jan</code></pre><p class="" style="white-space:pre-wrap;">To get this result, it requires that use of contextual information to figure out the proper placement, which can become very complicated and computationally expensive.</p><p class="" style="white-space:pre-wrap;"><strong>But the design perk to sorting a journal is that it'll be sorting at most one change at a time. </strong>Since the user can at most add, reorder, or change one entry at a time. So even though we can deal fairly well with a completely randomized list, this helps avoid unintended effects due to this quirk. In fact, due to only one change at a time, we can limit the number of changes from sorting a list, and cancel the sort if it threatens to scramble the user's ordering.</p><p class="" style="white-space:pre-wrap;">In terms of analyzing the worst case compute performance, it's about N^2. Since it's using the javascript sort, which is a bubble sort. Even though it's sorting each sublayer making it technically the sum of each layer subsetN^2, the worst case scenario is a user having everything on a single layer thus N^2. In addition, we're just using basic list insertions which have N performance, and so roughly N^2 to recreate a list via insertions. So after combining the sorting and inserting, it's still roughly N^2 in compute performance.</p><p class="" style="white-space:pre-wrap;">In terms of analyzing the worst case memory performance based on the algorithm, it's about N. Although there are subarrays created for each layer in sum it's still equal to the size of the whole array, since we're removing elements from the array and adding it to the subarrays or the reverse during the reconstruction. The actual implementation takes up a bit more space, since we're not removing the elements from the main array right away, since it would shift the array positions making the for loop error out. I could have done this in reverse, but I just wanted to keep it simpler for the time being. In addition, I copied objects often times, so that I could see what was happening at each stage.</p><p class="" style="white-space:pre-wrap;">But hey it works and journaling technology has advanced!</p>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_3_1495049797570_18593"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:680px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:61.02941131591797%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif" data-image-dimensions="680x415" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif" data-stretch="false" decoding="async" elementtiming="system-image-block" height="415" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055191677-ZL8ZTEOVQEZW3EC0J2P9/insertentry.gif?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="680"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_3_1495049797570_17687"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:680px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:53.52941131591797%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif" data-image-dimensions="680x364" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif" data-stretch="false" decoding="async" elementtiming="system-image-block" height="364" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055165246-VC6SPTCRC652JF8V2LYN/rearrangeentry.gif?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="680"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_3_1495049797570_46418"><div class="sqs-block-content">
<div class="sqs-html-content">
<h2 style="white-space:pre-wrap;">Technical - Variable Size Lazy Loader</h2><p class="" style="white-space:pre-wrap;">Another issue that needed addressing was that I was determined to have everything on a single page. No we won't be click to go to another view that shows the full journal entry, I demand everything on one page! Hahaha, now that I know code, I can fulfill my maniacal desires.</p><p class="" style="white-space:pre-wrap;">So I've never written a lazy loader before, so the first thing I did was research. And apparently it works by offsetting the scroll according to how large the component you're loading is. So every time you reach the bottom of the page, a say 100px height component is loaded, and at the same time the scroll is offset by 100px.</p><p class="" style="white-space:pre-wrap;">Unfortunately there is no offset method, it's a scrollTop(val) method that sets the scrolled position of the window. The value parameter defines where the top of the window is in the scrollable element if all visible.</p><p class="" style="white-space:pre-wrap;">So when going loading the bottom component, it's calculated based on the combination of the total height of the scrollable element if all were visible minus the height of the window to the scrollable element minus the actual height of the loading component. Luckily when loading the top component, it's just the height of the loading component.</p><p class="" style="white-space:pre-wrap;">Now in order for a seamless experience, it all hinges on this offset scroll matching the size of the loading component down to the pixel. This is why everyone likes to use components that are the same size for lazy loaders, because it's much simpler. The size of the components to be loaded are the same as the ones already on the screen.</p><p class="" style="white-space:pre-wrap;">Unfortunately the auto-sizing text area component that I imported doesn't determine the size immediately on load. Initially it has a height of 0, and once it calculates how much text is there and how big it needs to be, then it has a height. So I managed to get around this problem by using a placeholder paragraph element with the same text and CSS, as well as a onFocus listener to switch the placeholder with the actual text-area. Overall, this got the desired effect, while improving performance and providing a better UI design.</p><p class="" style="white-space:pre-wrap;">But also unfortunately I have to load a gallery of photos asynchronously, so we don't really know the total size of the component until that's done or do we?</p><p class="" style="white-space:pre-wrap;">So the solution was similar to the previous one. I grabbed the photo dimensions on upload, and saved it along with the photo data. This way when the component is loaded, the photo dimensions are already preloaded with a placeholder image say a loading wheel.</p><p class="" style="white-space:pre-wrap;">Now the full dimensions of the component are specified on load, which will be called back to the main window to use in the offset. Overall, creating this smooth buttery experience where we can seamlessly scroll through our journal :)</p>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_5_1494880454802_40399"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:1920px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:55.72916793823242%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg" data-image-dimensions="1920x1070" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg" data-stretch="false" decoding="async" elementtiming="system-image-block" height="1070" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494906385542-26OGRZQWLW8K7IRRJI4V/breakfast-1242529_1920.jpg?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="1920"/>
</div>
</div>
<figcaption class="image-caption-wrapper">
<div class="image-caption"><p class="" style="white-space:pre-wrap;">The aspiration</p></div>
</figcaption>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_5_1494880454802_40677"><div class="sqs-block-content">
<div class="sqs-html-content">
<p class="" style="white-space:pre-wrap;">Unfortunately there's additional details that I wasn't aware of. Specifically, the way the scroll wheel works is different from the arrow key or mobile touch scrolling!</p><p class="" style="white-space:pre-wrap;">So typically I set the lazy loader to trigger when it's essentially at the very bottom of the window. Since if there's a remainder, that needs to be accounted for as well. Now the mouse scroll wheel is very good at getting to the very bottom, but the keyboard arrow keys..... not so much.</p><p class="" style="white-space:pre-wrap;">The keyboard arrow keys move a set jump distance. And if you're close to the bottom and the remainder is less than the jump distance, it won't move. This means the lazy loader won't trigger.</p><p class="" style="white-space:pre-wrap;">Then there's the mobile touch scrolling. So mobile touch scrolling has those really fancy physics based scrolling effects. Unfortunately that takes precedence over lazy loading. So instead of the lazy loader just firing off as quickly as it can, the scroll will (on iOS) bounce off bottom then lazy load the next element.</p><p class="" style="white-space:pre-wrap;">Overall, there's a number of problems, and this implementation will need to be reworked. Either by utilizing an existing lazy loader and finding a way to shoehorn this variable height callback in or designing a new lazy loader implementation that manipulates component position with overflow hidden.</p>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_51_1495049797570_90246"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:820px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:88.29267883300781%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif" data-image-dimensions="820x724" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif" data-stretch="false" decoding="async" elementtiming="system-image-block" height="724" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495081569748-SHXLM4VJNLUYFASOQU7Q/lazyloader.gif?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="820"/>
</div>
</div>
<figcaption class="image-caption-wrapper">
<div class="image-caption"><p class="" style="white-space:pre-wrap;">It looks like it's just scrolling, but it's actually lazy loading and it's beautiful</p></div>
</figcaption>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_51_1495049797570_90524"><div class="sqs-block-content">
<div class="sqs-html-content">
<h2 style="white-space:pre-wrap;">Technical - Companion AI</h2>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_7_1494880454802_16044"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:360px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:150%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg" data-image-dimensions="360x540" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg" data-stretch="false" decoding="async" elementtiming="system-image-block" height="540" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494908581838-96TD6XD3Z1YT5EV8LY37/images.jpeg?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="360"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_7_1494880454802_16322"><div class="sqs-block-content">
<div class="sqs-html-content">
<p class="" style="white-space:pre-wrap;">So obviously we're not going to try to build something like the AI in her, but it did inspire me to consider it, and see what could I do with the current resources/tools.</p><p class="" style="white-space:pre-wrap;">Part of what makes an AI companion for a journal attractive is that it isn't a real person, and as long as privacy is ensured, people are more comfortable sharing what's on their minds and in their hearts.</p><p class="" style="white-space:pre-wrap;">So how do we do this? Well, recently there was a bot that supposed passed the Turing test, which is the point at which a person can't tell if they're chatting with a human or a robot. However, unfortunately they did so by pretending to be an easily distracted child who primarily spoke another language. Clearly this would not be beneficial towards helping someone write a journal.</p><p class="" style="white-space:pre-wrap;">And that's exactly what I realized, the goal isn't to try to fool someone it's a human, the goal is to just try to help someone write their journal. And that is a much more accomplishable technical goal than the former.</p><p class="" style="white-space:pre-wrap;">Luckily since I had a curiosity in psychology and I read rather diversely, I learned long ago that there was a therapy bot that was very good at getting people to talk to it. It was called ELIZA. It worked primarily by using simple filler question like "How does that make you feel?" and reflecting your statements back to you as a question. So if you said, "I'm not sure if I can do this." It'll respond with "How long have you been not sure if you can do this?" through simple regex patterns.</p><p class="" style="white-space:pre-wrap;">There was a python implementation that I was able to grab and it was a strong starting point. And I added on some simple stuff like having different questions whether your at the beginning of an empty journal entry versus in the middle of one. So I would have questions like "What was the best part of today?" if at the beginning versus using ELIZA for something in the middle. But given the number of tools currently available can't I do better? And quickly my attention turned towards natural language processing.</p><p class="" style="white-space:pre-wrap;">So I looked into IBM Watson and Google Natural Language Processing, summarization tools, and overall I found that there were a two relatively accurate fundamental legos that I could work with: sentiment analysis and summarization. (The syntax analysis looks pretty good but it'd take a decent amount of work to get something useful from that).</p><p class="" style="white-space:pre-wrap;">But how do I take these really fundamental tools the sentiment of something and being able to summarize something, and put it together to get a useful journal helper?</p>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_8_1494913745522_47155"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:1920px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:97.76041412353516%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg" data-image-dimensions="1920x1877" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg" data-stretch="false" decoding="async" elementtiming="system-image-block" height="1877" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494917080380-159IKI9EI23KWJ72H5WG/art-1982089_1920.jpg?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="1920"/>
</div>
</div>
<figcaption class="image-caption-wrapper">
<div class="image-caption"><p class="" style="white-space:pre-wrap;">A whole world made out of legos!</p></div>
</figcaption>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_8_1494913745522_47433"><div class="sqs-block-content">
<div class="sqs-html-content">
<p class="" style="white-space:pre-wrap;">It definitely took a bit of thought, but luckily I had partially completed an AI course and remembered about the concept of a heuristic. A heuristic is a rule of thumb, kind of like saying major cities tend to be on the coast. And I came up with an effective journal helper heuristic that can be created through the combination of sentiment analysis and summarization.</p><p class="" style="white-space:pre-wrap;">Essentially, it would summarize the past say 10 sentences you wrote, and finds the sentiment magnitude (or how strongly you felt) from the summarization. Then it would find the sentiment magnitude of each individual sentence. Now any sentence with a sentiment magnitude higher than the summarization sentiment magnitude would be of interest. The idea is that clearly you feel strongly about this, but it wasn't the main topic of discussion. Now we can use ELIZA to potentially reflect this statement back on you or just ask a question like "Can you tell me more about '&lt;insert statement of interest here&gt;'?"</p><p class="" style="white-space:pre-wrap;">It is a legitimate and powerful way of using the technology we have available today to provide a meaningful improvement to writing a journal.</p><p class="" style="white-space:pre-wrap;">Now there's still additional improvements that can be made. One of the most interesting is the idea of reflecting a statement back to you as question. Currently it's a very on rails approach with ELIZA that only recognizes particular phrases or a very generic approach with those "Can you tell me more about '&lt;insert statement here&gt;'?" questions.</p><p class="" style="white-space:pre-wrap;">Ideally the AI could reflect any statement back into a question. One way to fix this is by using a neural network. It would be trained with statements as the training set and the reflected statement question as the label. In addition, here it would be beneficial to include the syntax analysis of the both the training and label set to help it understand how to convert the sentence. However, that is for another time, but it is definitely a viable approach. Generally the sentence reflection process only requires modifying a few words at the beginning, but even with that there's too many different cases to be covered with regex. In addition, we can use the neural network confidence to decide whether to use the custom neural network response or something more generic like "Can you tell me more about '&lt;insert statement here&gt;'?"</p>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_3_1495049797570_20444"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:680px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:19.264705657958984%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif" data-image-dimensions="680x131" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif" data-stretch="false" decoding="async" elementtiming="system-image-block" height="131" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079201240-2IE6FUS48QFLMZK4LGL4/companionAI.gif?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="680"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_3_1495049797570_44555"><div class="sqs-block-content">
<div class="sqs-html-content">
<p class="" style="white-space:pre-wrap;">Although it was mostly done in terms of the functional aspects, there were still security issues to be dealt with. Obviously I can't leave a completely unprotected API out there in the dangerous wilds of the internet.</p><p class="" style="white-space:pre-wrap;">So basically I have users submit their email, so that I can send a unique password to them, which they enter into the Settings page to enable the journal AI.</p><p class="" style="white-space:pre-wrap;">The email submission API is protected by Google's recaptcha. When an email is submitted the email, dropbox user ID, and recaptcha key is sent to the backend. The server will first validate the recaptcha key, followed by creating/updating a user in the database with the randomly generated password along the dropbox user ID and assigning a quota. Then it'll send the email with the password via SendGrid.</p><p class="" style="white-space:pre-wrap;">The actual journal AI API is protected by the randomly generated password that is saved on the server side to validate requests, and through the quota. In addition, since we're using Heroku, it includes rate limiting protection.</p>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_3_1495250891002_23428"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:836px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:103.4688949584961%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png" data-image-dimensions="836x865" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png" data-stretch="false" decoding="async" elementtiming="system-image-block" height="865" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495831366565-OZ7GL6FZBF47YSRICF03/Journal_Light_verification.png?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="836"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_3_1495250891002_29347"><div class="sqs-block-content">
<div class="sqs-html-content">
<h2 style="white-space:pre-wrap;">Technical - Fun Bugs!</h2>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_9_1494880454802_46543"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:1280px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:64.6875%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png" data-image-dimensions="1280x828" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png" data-stretch="false" decoding="async" elementtiming="system-image-block" height="828" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494913516844-V7CAMEV3A0P2R5BNKTII/computer-problem-152211_1280.png?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="1280"/>
</div>
</div>
<figcaption class="image-caption-wrapper">
<div class="image-caption"><p class="" style="white-space:pre-wrap;">Why are they fun? Because they don't make any sense.</p></div>
</figcaption>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_9_1494880454802_46822"><div class="sqs-block-content">
<div class="sqs-html-content">
<p class="" style="white-space:pre-wrap;">So the one problem that was probably the most mysterious was implementing drag and drop reordering with sorting.</p><p class="" style="white-space:pre-wrap;">I used a library called Dragula, which gave a very easy way to implement an attractive drag and drop system.</p><p class="" style="white-space:pre-wrap;">Unfortunately for some reason, I could move entries out of order on screen, but according to the React state it hasn't changed. And I can see the reorder action being fired with the correct entries to be moved followed by it being sorted into the correct order. In addition, if I manually modify the order by changing the React user data state, Dragula does update properly.</p>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_8_1494913745522_13093"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:822px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:36.2530403137207%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif" data-image-dimensions="822x298" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif" data-stretch="false" decoding="async" elementtiming="system-image-block" height="298" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079219201-60Q4HU6UPPKR2URO39XV/troublingbug.gif?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="822"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_8_1494913745522_13372"><div class="sqs-block-content">
<div class="sqs-html-content">
<p class="" style="white-space:pre-wrap;">So what gives? </p><p class="" style="white-space:pre-wrap;">After probably some soul searching, it finally dawned on me what was going on. Dragula is keeping it's own state to provide seamless animations.</p><p class="" style="white-space:pre-wrap;">I had seen previously on a React clone of trello where every time I drag and dropped a card, it would briefly flash the card back to where it was originally before refreshing to the position I had dropped it. This is because the drag and drop tool just told React what was moved and where, but it still takes a fraction of a second for React to update that card order, and in that fraction of a second you can see the old state.</p><p class="" style="white-space:pre-wrap;">So Dragula keeps it's own state of the card order, but how does that enable it to have a different order than what I'm feeding it? Basically since these entries were being moved out of order and being sorted back to the original order, what Dragula saw was no change. Since React components update only when there's a change in the data being passed to it, Dragula did not re-render. However, Dragula did retain it's own internal state change with the entry moved out of order, and that was the problem.</p><p class="" style="white-space:pre-wrap;">Here is the one liner fix:</p>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_8_1494913745522_24552"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:850px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:47.29412078857422%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png" data-image-dimensions="850x402" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png" data-stretch="false" decoding="async" elementtiming="system-image-block" height="402" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1494916315138-E68TLYFRP1JMN7XKRTCK/reorderfix.png?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="850"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_8_1494913745522_24830"><div class="sqs-block-content">
<div class="sqs-html-content">
<p class="" style="white-space:pre-wrap;">Yep it was this.emit("change") twice. It's quick enough to be invisible, but will properly trigger Dragula re-render and make everything work :)</p><h2 style="white-space:pre-wrap;">Wrap-Up</h2><p class="" style="white-space:pre-wrap;">It currently exists as a rough draft accessible <a href="https://dqwxe6cgpr1t5.cloudfront.net/">online</a>, if you're interested in checking it out via a test account contact me via Luo.j2010@gmail.com and I'll pass you the information.</p><p class="" style="white-space:pre-wrap;">There are various areas that can be improved upon for example:</p><ul data-rte-list="default"><li><p class="" style="white-space:pre-wrap;">The largest issue specifically with performance is that currently all images are loaded at full-size but just reduced in display size. This is because Dropbox's thumbnail api doesn't support thumbnail conversion of gifs. Gifs are also some of the largest possible files one can end up uploading, since their compression is worse than actual video formats. In addition, I still want to turn this into an application with local storage on the hard drive, in which case I can just pull images from the hard drive on demand. So rather than implementing a partial solution, I'll hold off until I have time to complete it.</p></li><li><p class="" style="white-space:pre-wrap;">There are various edge case bugs and things that are incomplete. For instance, there are some edge cases where adding a new entry sometimes causes the scroll to jump around. Another example is adding new entries at the top defaults to the current date/time, but if one has previously added entries at a future date this creates an improperly sorted list.</p></li><li><p class="" style="white-space:pre-wrap;">Authenticating journalAI api requests via client session user authentication rather than through a emailed password setup.</p></li></ul><p class="" style="white-space:pre-wrap;">However, I would call it a presentable state. There's enough breadth and depth to act as a full stack portfolio piece, and also I can use it for my own journaling needs :D</p><p class="" style="white-space:pre-wrap;">When it comes to it being a potential business, I think the next major area that needs to be worked on is the marketing. Especially since it didn't necessary start with the potential audience in mind, except for myself :)</p><p class="" style="white-space:pre-wrap;">So is there really a large enough group of people out there who would want to use this product? Because if there is, I would rather run some Kickstarter or something to raise funds to hire people to help me finish building it rather than doing it all myself. Plus it'd be more interesting spending more time working with a team.</p><p class="" style="white-space:pre-wrap;">And this is where things stand today, working on scoping out potential markets with a feeling that there would be people who'd want to use this...</p>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_3_1495049797570_12400"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:680px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:100.4411849975586%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif" data-image-dimensions="680x683" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif" data-stretch="false" decoding="async" elementtiming="system-image-block" height="683" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495079308728-UZ366V0J9UDU410LDIL4/panorama_short.gif?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="680"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_3_1495049797570_15178"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:680px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:89.26470947265625%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif" data-image-dimensions="680x607" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif" data-stretch="false" decoding="async" elementtiming="system-image-block" height="607" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055122677-CNK1ITPVTFUZ4D4OQ99V/search.gif?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="680"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_3_1495049797570_16447"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:680px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:89.26470947265625%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif" data-image-dimensions="680x607" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif" data-stretch="false" decoding="async" elementtiming="system-image-block" height="607" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055142016-UMPNDNHM0YS5FAAJGSZQ/scrollbar.gif?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="680"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_17_2_3_1495049797570_19553"><div class="sqs-block-content">
<div class="image-block-outer-wrapper layout-caption-below design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none" data-test="image-block-inline-outer-wrapper">
<figure class="sqs-block-image-figure intrinsic" style="max-width:680px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element has-aspect-ratio" style="
                position: relative;
                
                  padding-bottom:88.08824157714844%;
                
                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);
              ">
<img alt="" data-image="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif" data-image-dimensions="680x599" data-image-focal-point="0.5,0.5" data-load="false" data-loader="sqs" data-src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif" data-stretch="false" decoding="async" elementtiming="system-image-block" height="599" loading="lazy" onload='this.classList.add("loaded")' sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" src="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif" srcset="https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif?format=100w 100w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif?format=300w 300w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif?format=500w 500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif?format=750w 750w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/58e7f4d946c3c4645587ad7d/1495055253451-YCKLVENO8X0ARVFCRSG8/mediasupport_closeup.gif?format=2500w 2500w" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" width="680"/>
</div>
</div>
</figure>
</div>
</div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-yui_3_17_2_3_1495049797570_15455"><div class="sqs-block-content">
<div class="sqs-html-content">
<p class="" style="white-space:pre-wrap;"> </p><p class="" style="white-space:pre-wrap;"> </p>
</div>
</div></div></div></div></div>
</div>